<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POS_Customers</title>
    <link href="assets/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/style.css">
   
</head>
<body>
    <nav class=" navbar navbar-expand-lg navbar-dark " style="background-color: #5f8ba8;">
        <div class="container-fluid ">
          <a class="nav navbar-brand  mt-1" href="#" >
            <img src="assets/img/icons8_multibanco_96px.png" alt="" width="45" height="45" class="d-inline-block align-text-top"> PLACE ORDER SYSTEM</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link" aria-current="page" id="nav-home" href="#">Home</a>
              </li> 
              <li class="nav-item">
                <a class="nav-link" id="nav-custom" href="#" >Customers</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" id="nav-item" href="#">Items</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" id="nav-order" href="#">PlaceOrder</a>
              </li>
            </ul>
            <button class="btn btn-danger" type="submit">LOGOUT</button>
          </div>
        </div>
      </nav>

     
   

  <!-- customer///////////////////////////////////////////////////////////////////////////////////////////////////////////// -->

    <section class="container" id="customWindow">
      <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
        <ol class="breadcrumb mt-5">
          <li class="breadcrumb-item"><a href="#">Home</a></li>
          <li class="breadcrumb-item active" aria-current="page">Customers</li>
        </ol>
      </nav>

      <section class="row">
          <div class="custombar col-12 col-md-12 mt-1">
            <p class="mt-2"><img src="assets/img/users.png" alt="" width="45" height="45">Customers</p>
          </div>
      </section>

      <section class="row">
        <div class="col-12 col-md-12 col-lg  mt-5">
          <div class="btn-group" role="group" aria-label="Basic mixed styles example">
            <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal">Delete</button>
            <button type="button" class="btn btn-primary"  data-bs-toggle="modal" data-bs-target="#updateModal">Update</button>
            <button type="button" class="btn btn-success"  data-bs-toggle="modal" data-bs-target="#addModal">Add New Customer</button>
          </div>
        </div>

        <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div id="deleteCustomer" class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Delete Customer</h5>
                <button type="button" class="btn-close btn-light" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                Are you sure you want to delete customer?
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-danger">Delete Customer</button>
              </div>
            </div>
          </div>
        </div>

        <div class="modal fade" id="addModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div id="addCustomer" class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Add New Customer</h5>
                <button type="button" class="btn-close btn-light" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <form>
                  <div class="mb-3">
                    <label for="exampleInputEmail1" class="form-label">Customer Id</label>
                    <input type="text" class="form-control " id="txtCustomerId" aria-describedby="emailHelp">
                    <p><small class="text-danger pl-1" id="lblcusid"></small></p>
                  </div>
                  <div class="mb-3">
                    <label for="exampleInputPassword1" class="form-label">Name</label>
                    <input type="text" class="form-control " id="txtCustomerName">
                    <p><small class="text-danger pl-1" id="lblcusname"></small></p>
                  </div>
                  <div class="mb-3">
                    <label for="exampleInputPassword1" class="form-label">Address</label>
                    <input type="text" class="form-control " id="txtCustomerAddress">
                    <p><small class="text-danger pl-1" id="lblcusaddress"></small></p>
                  </div>
                  <div class="mb-3">
                    <label for="exampleInputPassword1" class="form-label">Contact</label>
                    <input type="text" class="form-control " id="txtCustomerContact">
                    <p><small class="text-danger pl-1" id="lblcussalary"></small></p>
                  </div>                
                </form>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-danger" >Clear</button>
                <button id="btnCustadd" type="button" class="btn btn-success">Add Customer</button>
              </div>
            </div>
          </div>
        </div>


        <div  class="col col-md-12 col-lg  mt-5">
          <form id="search" class="d-flex">
            <input aria-label="Search" class="border form-control me-2  border-primary border-3" placeholder="Search Customer" type="search">
            <div class="dropdown">
              <a class="btn btn-light btn-lg dropdown-toggle border-success border-3" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                Type
              </a>
              <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                <li><a class="dropdown-item" href="#">ID</a></li>
                <li><a class="dropdown-item" href="#">Name</a></li>
                <li><a class="dropdown-item" href="#">Address</a></li>
              </ul>
            </div>
            <button class="btn btn-outline-success border-success border-3" type="submit">Search</button>
          </form>
        <div>
      </section>
     
      <section class="row">
        <table id="cstTable" class="table  table-striped table-hover table-bordered border-light mt-5" style="background-color: #90bfdf;">
          <thead class="table-striped" style="background-color: #024877; color: white;">
            <tr>
              <th scope="col">ID</th>
              <th scope="col">Name</th>
              <th scope="col">Address</th>
              <th scope="col">Contact</th>
            </tr>
          </thead>
          <tbody>
           
          </tbody>
        </table>
    </section>
  </section>


<!-- item//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->

<section class="container" id="itemWindow">
  <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
    <ol class="breadcrumb mt-5">
      <li class="breadcrumb-item"><a href="#">Home</a></li>
      <li class="breadcrumb-item active" aria-current="page">Customers</li>
    </ol>
  </nav>

  <section class="row">
      <div class="custombar col-12 col-md-12 mt-1">
        <p class="mt-2"><img src="assets/img/items.png" alt="" width="45" height="45">Items</p>
      </div>
  </section>

  <section class="row">
    <div class="col-12 col-md-12 col-lg  mt-5">
      <div class="btn-group" role="group" aria-label="Basic mixed styles example">
        <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal2">Delete</button>
        <button type="button" class="btn btn-primary"  data-bs-toggle="modal" data-bs-target="#updateModal2">Update</button>
        <button type="button" class="btn btn-success"  data-bs-toggle="modal" data-bs-target="#addModal2">Add New Item</button>
      </div>
    </div>

    <div class="modal fade" id="deleteModal2" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div id="deleteItem" class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Delete Item</h5>
            <button type="button" class="btn-close btn-light" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            Are you sure you want to delete Item?
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="button" class="btn btn-danger">Delete Item</button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="addModal2" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div id="addItem" class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Add New Item</h5>
            <button type="button" class="btn-close btn-light" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form>
              <div class="mb-3">
                <label for="exampleInputEmail1" class="form-label">Item Code</label>
                <input type="text" class="form-control " id="txtItemId" aria-describedby="emailHelp">
                <p><small class="text-danger pl-1" id="lblitemid"></small></p>
              </div>
              <div class="mb-3">
                <label for="exampleInputPassword1" class="form-label">Type</label>
                <input type="text" class="form-control " id="txtItemName">
                <p><small class="text-danger pl-1" id="lblitemname"></small></p>
              </div>
              <div class="mb-3">
                <label for="exampleInputPassword1" class="form-label">Qty On Hand</label>
                <input type="text" class="form-control " id="txtItemQty">
                <p><small class="text-danger pl-1" id="lblitemqty"></small></p>
              </div>
              <div class="mb-3">
                <label for="exampleInputPassword1" class="form-label">Price</label>
                <input type="text" class="form-control " id="txtItemPrice">
                <p><small class="text-danger pl-1" id="lblitemprice"></small></p>
              </div>                
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-danger" >Clear</button>
            <button id="btnItemAdd" type="button" class="btn btn-success">Add Item</button>
          </div>
        </div>
      </div>
    </div>


    <div  class="col col-md-12 col-lg  mt-5">
      <form id="search" class="d-flex">
        <input aria-label="Search" class="border form-control me-2  border-primary border-3" placeholder="Enter Item" type="search">
        <div class="dropdown">
          <a class="btn btn-light btn-lg dropdown-toggle border-success border-3" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
            Type
          </a>
          <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
            <li><a class="dropdown-item" href="#">ID</a></li>
            <li><a class="dropdown-item" href="#">Type</a></li>
          </ul>
        </div>
        <button class="btn btn-outline-success border-success border-3" type="submit">Search</button>
      </form>
    <div>
  </section>
 
  <section class="row">
    <table id="tblItem" class="table  table-striped table-hover table-bordered border-light mt-5" style="background-color: #90bfdf;">
      <thead class="table-striped" style="background-color: #024877; color: white;">
        <tr>
          <th scope="col">ID</th>
          <th scope="col">Type</th>
          <th scope="col">Qty</th>
          <th scope="col">Price</th>
        </tr>
      </thead>
      <tbody>
       
      </tbody>
    </table>
</section>
</section>


   

<!-- placeOrder /////////////////////////////////////////////////////////////////////////////////////////////////////////////-->

    <section class="container" id="orderwindow">

      <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
        <ol class="breadcrumb mt-5">
          <li class="breadcrumb-item"><a href="#">Home</a></li>
          <li class="breadcrumb-item active" aria-current="page">PlaceOrder</li>
        </ol>
      </nav>

      <section class="row">
          <div class="orderbar col-12 col-md-12 mt-1">
            <p class="mt-2"><img src="assets/img/icons8_create_order_48px_3.png" alt="" width="45" height="45">PlaceOrder</p>
          </div>
      </section>
    
      <section class="row abcd">
        <div class="detail col-11 col-md-5 col-lg-4   mt-5">
          <div class="divs"><span class="text text-light">Customer Details</span></div>
          <div class="modal-body">
            <form>
              <div class="dropdown mt-3">
                <a class="btn btn-light btn-md dropdown-toggle border-primary border-2" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                  Select Customer
                </a>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                  <li><a class="dropdown-item" href="#">C-001</a></li>
                  <li><a class="dropdown-item" href="#">C-002</a></li>
                  <li><a class="dropdown-item" href="#">C-003</a></li>
                </ul>
              </div>
              <div class="mb-3 mt-3">
                <label for="exampleInputPassword1" class="form-label ">Name</label>
                <input type="text" class="form-control border-primary border-2" id="exampleInputName">
              </div>
              <div class="mb-3">
                <label for="exampleInputPassword1" class="form-label ">Address</label>
                <input type="text" class="form-control border-primary border-2" id="exampleInputAddress">
              </div>
              <div class="mb-3">
                <label for="exampleInputPassword1" class="form-label ">Contact</label>
                <input type="text" class="form-control border-primary border-2" id="exampleInputContact">
              </div>                
            </form>
          </div>
         
        </div>
    
        <div  class="detail col-11 col-md-5 col-lg-4  mt-5 ">
          
          <div class="divs"><span class="text text-light">Item Details</span></div>
          <div class="modal-body">
            <form>
              <div class="dropdown mt-3 d-flex">
                <a class="btn btn-light btn-md dropdown-toggle border-primary border-2" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                  Select Item
                </a>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                  <li><a class="dropdown-item" href="#">I-001</a></li>
                  <li><a class="dropdown-item" href="#">I-002</a></li>
                  <li><a class="dropdown-item" href="#">I-003</a></li>
                </ul> 
                <div class="item_type">
                  <input type="text" class="form-control border-primary border-2" id="floatingPassword" placeholder="Type">
                </div>
              </div>
             
              <div class="mb-3 mt-4">
                <label for="exampleInputPassword1" class="form-label ">Qty On Hand</label>
                <input type="text" class="form-control border-primary border-2" id="exampleInputAddress">
              </div>
              <div class="mb-3">
                <label for="exampleInputPassword1" class="form-label ">Price</label>
                <input type="text" class="form-control border-primary border-2" id="exampleInputContact">
              </div> 
              <div class="mb-3">
                <label for="exampleInputPassword1" class="form-label ">Qty For Sale</label>
                <input type="text" class="form-control border-primary border-2" id="exampleInputAddress">
              </div>  
              <div class="form-floating mt-5">
                <button type="button" class="btn btn-success right">Add to Cart</button>
                <button type="button" class="btn btn-danger right">Clear</button>
              </div>              
            </form>
          </div> 
        </div>
    
        <div  class="detail col-11 col-md-11 col-lg-3  mt-5">
            <div class="divs"><span class="text text-light ">Order Details</span></div>
            <div class="modal-body">
              <form>
                <div class="mb-3 mt-3">
                  <input type="date" class="form-control border-primary border-2" id="exampleInputName">
                </div>
                <div class="form-floating mt-3">
                  <input type="text" class="form-control" id="floatingPassword" placeholder="Price">
                  <label for="floatingPassword">Order Id</label>
                </div> 
                <div class="form-floating mt-3">
                  <input type="text" class="form-control" id="floatingPassword" placeholder="Price">
                  <label for="floatingPassword">Price</label>
                </div>   
                <div class="form-floating mt-3">
                  <input type="text" class="form-control" id="floatingPassword" placeholder="Price">
                  <label for="floatingPassword">Discount</label>
                </div>   
                <div class="form-floating mt-3">
                  <input type="text" class="form-control" id="floatingPassword" placeholder="Price">
                  <label for="floatingPassword">Balance</label>
                </div> 
                <div class="form-floating mt-4">
                  <button type="button" class="btn btn-success right">Place Order</button>
                  <button type="button" class="btn btn-danger right">Cancel Order</button>
                </div>              
              </form>
            </div>
        </div>
      </section>
    
      <section class="row">
        <table class="table  table-striped table-hover table-bordered border-light mt-5" style="background-color: #90bfdf;">
          <thead class="table-striped" style="background-color: #024877; color: white;">
            <tr>
              <th scope="col">Item ID</th>
              <th scope="col">Type</th>
              <th scope="col">Qty</th>
              <th scope="col">Price</th>
            </tr>
          </thead>
          <tbody>
           
          </tbody>
        </table>
      </section>
    </section>

    <script src="assets/jQuery/jquery-3.6.0.min.js"></script> 
    
    
    <script>
      document.getElementById("itemWindow").style.display="none";
      document.getElementById("orderwindow").style.display="none";
  
      document.getElementById("nav-custom").addEventListener("click",function () {
        document.getElementById("customWindow").style.display="block";
        document.getElementById("itemWindow").style.display="none";
        document.getElementById("orderwindow").style.display="none";
      });
 
      document.getElementById("nav-item").addEventListener("click",function () {
        document.getElementById("itemWindow").style.display="block";
        document.getElementById("customWindow").style.display="none";
        document.getElementById("orderwindow").style.display="none";  
      });
 
      document.getElementById("nav-order").addEventListener("click",function () {
        document.getElementById("orderwindow").style.display="block";
        document.getElementById("itemWindow").style.display="none";
        document.getElementById("customWindow").style.display="none";
      });
     
    
     
    $("#btnCustadd").click(function () {

        let customerID = $("#txtCustomerId").val();
        let customerName = $("#txtCustomerName").val();
        let customerAddress = $("#txtCustomerAddress").val();
        let customerContact = $("#txtCustomerContact").val();

        let row = `<tr><td>${customerID}</td><td>${customerName}</td><td>${customerAddress}</td><td>${customerContact}</td></tr>`;

        $("#cstTable").append(row);


        $("#cstTable>tr").click(function(){
            let Row=$(this);
            let CustomerID = $(Row.children().get(0)).text();
            let CustomerName = $(Row.children().get(1)).text();
            let CustomerAddress = $(Row.children().get(2)).text();
            let CustomerContact = $(Row.children().get(3)).text();
     
            $("#txtCusID").val(CustomerID);
            $("#txtCusName").val(CustomerName);
            $("#txtCusAddress").val(CustomerAddress);
            $("#txtCusTP").val(CustomerContact);
        });

    });


    $("#btnItemAdd").click(function () {

        let itemCode = $("#txtItemId").val();
        let itemName = $("#txtItemName").val();
        let itemQTY = $("#txtItemQty").val();
        let itemPrice = $("#txtItemPrice").val();

        let row = `<tr><td>${itemCode}</td><td>${itemName}</td><td>${itemQTY}</td><td>${itemPrice}</td></tr>`;

        $("#tblItem").append(row);


        $("#tblItem>tr").click(function(){
            let Row=$(this);
            let ItemCode = $(Row.children().get(0)).text();
            let ItemName = $(Row.children().get(1)).text();
            let ItemQTY = $(Row.children().get(2)).text();
            let ItemPrice = $(Row.children().get(3)).text();
     
            $("#txtCusID").val(ItemCode);
            $("#txtCusName").val(ItemName);
            $("#txtCusAddress").val(ItemQTY);
            $("#txtCusTP").val(ItemPrice);
        });

    });


    // validation////////////////////////////////////////////////////////////

    const cusIDRegEx = /^(C00-)[0-9]{1,3}$/;
    const cusNameRegEx = /^[A-z ]{5,20}$/;
    const cusAddressRegEx = /^[0-9/A-z. ,]{7,}$/;
    const cusSalaryRegEx = /^[0-9]{1,}[.]?[0-9]{1,2}$/;


    $('#txtCustomerId,#txtCustomerName,#txtCustomerAddress,#txtCustomerContact').on('keydown', function (eventOb) {
        if (eventOb.key == "Tab") {
            eventOb.preventDefault(); 
        }
    });

    $('#txtCustomerId,#txtCustomerName,#txtCustomerAddress,#txtCustomerContact').on('blur', function () {
        formValid();
    });

    $("#txtCustomerId").on('keyup', function (eventOb) {
        setButton();
        if (eventOb.key == "Enter") {
            checkIfValid();
        }

        if (eventOb.key == "Control") {
            var typedCustomerID = $("#txtCustomerId").val();
            var srcCustomer = searchCustomerFromID(typedCustomerID);
            $("#txtCustomerId").val(srcCustomer.getCustomerID());
            $("#txtCustomerName").val(srcCustomer.getCustomerName());
            $("#txtCustomerAddress").val(srcCustomer.getCustomerAddress());
            $("#txtCustomerContact").val(srcCustomer.getCustomerContact());
        }


    });

    $("#txtCustomerName").on('keyup', function (eventOb) {
        setButton();
        if (eventOb.key == "Enter") {
            checkIfValid();
        }
    });

    $("#txtCustomerAddress").on('keyup', function (eventOb) {
        setButton();
        if (eventOb.key == "Enter") {
            checkIfValid();
        }
    });

    $("#txtCustomerContact").on('keyup', function (eventOb) {
        setButton();
        if (eventOb.key == "Enter") {
            checkIfValid();
        }
    });
  
    $("#btnCustadd").attr('disabled', true);

    function clearAll() {
        $('#txtCustomerId,#txtCustomerName,#txtCustomerAddress,#txtCustomerContact').val("");
        $('#txCustomerId,#txtCustomerName,#txtCustomerAddress,#txtCustomerContact').css('border', '3px solid #ced4da');
        $('#txtCustomerId').focus();
        $("#btnCustadd").attr('disabled', true);
        loadAllCustomers();
        $("#lblcusid,#lblcusname,#lblcusaddress,#lblcussalary").text("");
    }

    function formValid() {
        var cusID = $("#txtCustomerId").val();
        $("#txtCustomerId").css('border', '3px solid green');
        $("#lblcusid").text("");
        if (cusIDRegEx.test(cusID)) {
            var cusName = $("#txtCustomerName").val();
            if (cusNameRegEx.test(cusName)) {
                $("#txtCustomerName").css('border', '3px solid green');
                $("#lblcusname").text("");
                var cusAddress = $("#txtCustomerAddress").val();
                if (cusAddressRegEx.test(cusAddress)) {
                    var cusSalary = $("#txtCustomerContact").val();
                    var resp = cusSalaryRegEx.test(cusSalary);
                    $("#txtCustomerAddress").css('border', '3px solid green');
                    $("#lblcusaddress").text("");
                    if (resp) {
                        $("#txtCustomerContact").css('border', '3px solid green');
                        $("#lblcussalary").text("");
                        return true;
                    } else {
                        $("#txtCustomerContact").css('border', '3px solid red');
                        $("#lblcussalary").text("Cus Salary is a required field : Pattern 100.00 or 100");
                        return false;
                    }
                } else {
                    $("#txtCustomerAddress").css('border', '3px solid red');
                    $("#lblcusaddress").text("Cus Name is a required field : Mimum 7");
                    return false;
                }
            } else {
                $("#txtCustomerName").css('border', '3px solid red');
                $("#lblcusname").text("Cus Name is a required field : Mimimum 5, Max 20, Spaces Allowed");
                return false;
            }
        } else {
            $("#txtCustomerId").css('border', '3px solid red');
            $("#lblcusid").text("Cus ID is a required field : Pattern C00-000");
            return false;
        }
    }

    function checkIfValid() {
        var cusID = $("#txtCustomerId").val();
        if (cusIDRegEx.test(cusID)) {
            $("#txtCustomerName").focus();
            var cusName = $("#txtCustomerName").val();
            if (cusNameRegEx.test(cusName)) {
                $("#txtCustomerAddress").focus();
                var cusAddress = $("#txtCustomerAddress").val();
                if (cusAddressRegEx.test(cusAddress)) {
                    $("#txtCustomerContact").focus();
                    var cusSalary = $("#txtCustomerContact").val();
                    var resp = cusSalaryRegEx.test(cusSalary);
                    if (resp) {
                        let res = confirm("Do you really need to add this Customer..?");
                        if (res) {
                            saveCustomer();
                            clearAll();
                        }
                    } else {
                        $("#txtCustomerContact").focus();
                    }
                } else {
                    $("#txtCustomerAddress").focus();
                }
            } else {
                $("#txtCustomerName").focus();
            }
        } else {
            $("#txtCustomerId").focus();
        }
    }

    function setButton() {
        let b = formValid();
        if (b) {
            $("#btnCustadd").attr('disabled', false);
        } else {
            $("#btnCustadd").attr('disabled', true);
        }
    }

    $('#btnCustadd').click(function () {
        checkIfValid();
    });


    ///////////////////////////////////////////////////////////////////////////////////////

    const itemIDRegEx = /^(I00-)[0-9]{1,3}$/;
    const itemNameRegEx = /^[A-z ]{5,20}$/;
    const itemQtyRegEx = /^[0-9]{1,}$/;
    const itemPriceRegEx = /^[0-9]{1,}[.]?[0-9]{1,2}$/;


    $('#txtItemId,#txtItemName,#txtItemQty,#txtItemPrice').on('keydown', function (eventOb) {
        if (eventOb.key == "Tab") {
            eventOb.preventDefault(); 
        }
    });

    $('#txtItemId,#txtItemName,#txtItemQty,#txtItemPrice').on('blur', function () {
        ItemformValid();
    });

    $("#txtItemId").on('keyup', function (eventOb) {
        setItemButton();
        if (eventOb.key == "Enter") {
            checkIfValidItem();
        }

        if (eventOb.key == "Control") {
            var typedCustomerID = $("#txtItemId").val();
            var srcItem = searchItemFromID(typedItemID);
            $("#txtItemId").val(srcItem.getItemID());
            $("#txtItemName").val(srcItem.getItemName());
            $("#txtItemQty").val(srcItem.getItemQty());
            $("#txtItemPrice").val(srcItem.getItemPrice());
        }


    });

    $("#txtItemName").on('keyup', function (eventOb) {
        setItemButton();
        if (eventOb.key == "Enter") {
          checkIfValidItem()
        }
    });

    $("#txtItemQty").on('keyup', function (eventOb) {
        setItemButton();
        if (eventOb.key == "Enter") {
          checkIfValidItem()
        }
    });

    $("#txtItemPrice").on('keyup', function (eventOb) {
        setItemButton();
        if (eventOb.key == "Enter") {
          checkIfValidItem()
        }
    });
  
    $("#btnItemadd").attr('disabled', true);

    function clearAllItem() {
        $('#txtItemId,#txtItemName,#txtItemQty,#txtItemPrice').val("");
        $('#txtItemId,#txtItemName,#txtItemQty,#txtItemPrice').css('border', '2px solid #ced4da');
        $('#txtItemId').focus();
        $("#btnItemadd").attr('disabled', true);
        loadAllItems();
        $("#lblitemid,#lblitemname,#lblitemqty,#lblitemprice").text("");
    }

    function ItemformValid() {
        var itemID = $("#txtItemId").val();
        $("#txtItemId").css('border', '3px solid green');
        $("#lblitemid").text("");
        if (itemIDRegEx.test(itemID)) {
            var itemName = $("#txtItemName").val();
            if (itemNameRegEx.test(itemName)) {
                $("#txtItemName").css('border', '3px solid green');
                $("#lblitemname").text("");
                var itemQty = $("#txtItemQty").val();
                if (itemQtyRegEx.test(itemQty)) {
                    var itemPrice = $("#txtItemPrice").val();
                    var resp = itemPriceRegEx.test(itemPrice);
                    $("#txtItemQty").css('border', '3px solid green');
                    $("#lblitemqty").text("");
                    if (resp) {
                        $("#txtItemPrice").css('border', '3px solid green');
                        $("#lblitemprice").text("");
                        return true;
                    } else {
                        $("#txtItemPrice").css('border', '3px solid red');
                        $("#lblitemprice").text("item Price is a required field : Pattern 100.00 or 100");
                        return false;
                    }
                } else {
                    $("#txtItemQty").css('border', '3px solid red');
                    $("#lblitemqty").text("Item Qty is a required field :10");
                    return false;
                }
            } else {
                $("#txtItemName").css('border', '3px solid red');
                $("#lblitemname").text("Item Name is a required field : Mimimum 5, Max 20, Spaces Allowed");
                return false;
            }
        } else {
            $("#txtItemId").css('border', '3px solid red');
            $("#lblitemid").text("Item ID is a required field : Pattern I00-000");
            return false;
        }
    }

    function checkIfValidItem() {
        var itemID = $("#txtItemId").val();
        if (itemIDRegEx.test(itemID)) {
            $("#txtItemName").focus();
            var itemName = $("#txtItemName").val();
            if (itemNameRegEx.test(itemName)) {
                $("#txtItemQty").focus();
                var itemQty = $("#txtItemQty").val();
                if (itemQtyRegEx.test(itemQty)) {
                    $("#txtItemPrice").focus();
                    var itemPrice = $("#txtItemPrice").val();
                    var resp = itemPriceRegEx.test(itemPrice);
                    if (resp) {
                        let res = confirm("Do you really need to add this Item..?");
                        if (res) {
                            saveItem();
                            clearAllItem();
                        }
                    } else {
                        $("#txtItemPrice").focus();
                    }
                } else {
                    $("#txtItemQty").focus();
                }
            } else {
                $("#txtItemName").focus();
            }
        } else {
            $("#txtItemId").focus();
        }
    }

    function setItemButton() {
        let b = ItemformValid();
        if (b) {
            $("#btnItemAdd").attr('disabled', false);
        } else {
            $("#btnItemAdd").attr('disabled', true);
        }
    }

    $('#btnItemAdd').click(function () {
        checkIfValidItem();
    });




  </script>

<script src="assets/bootstrap/js/bootstrap.bundle.min.js"></script>


  
</body>
</html>